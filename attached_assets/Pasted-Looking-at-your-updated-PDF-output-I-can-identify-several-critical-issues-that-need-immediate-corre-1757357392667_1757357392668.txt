Looking at your updated PDF output, I can identify several critical issues that need immediate correction for the reMarkable Paper Pro Move. Here’s my detailed analysis and the code the Replit agent needs:

## Critical Issues Identified:

**1. Overcrowded Time Slots:** 30 time slots (7AM-10PM, 30-min intervals) on a 7.3” narrow screen creates illegibly small rows

**2. Poor Space Allocation:** Time grid consumes ~80% of vertical space, leaving priorities/goals/notes cramped

**3. Missing Bidirectional Linking:** No connection between weekly overview and daily events

**4. Inefficient Screen Usage:** Not optimized for 16:9 aspect ratio and narrow writing area

## Complete Replit Agent Instructions:

### 1. Data Structure & Linking System

```javascript
// Event management system for bidirectional linking
class PlannerEventManager {
  constructor() {
    this.events = new Map(); // eventId -> event object
    this.weeklyEvents = new Set(); // events visible on weekly view
    this.dailyEvents = new Map(); // date -> Set of eventIds
  }
  
  addEvent(event) {
    const eventId = this.generateId();
    event.id = eventId;
    this.events.set(eventId, event);
    
    // Add to weekly view if multi-day or important
    if (event.duration > 1 || event.priority === 'high') {
      this.weeklyEvents.add(eventId);
    }
    
    // Add to specific day
    const dateKey = event.date.toISOString().split('T')[0];
    if (!this.dailyEvents.has(dateKey)) {
      this.dailyEvents.set(dateKey, new Set());
    }
    this.dailyEvents.get(dateKey).add(eventId);
    
    return eventId;
  }
  
  getWeeklyEvents() {
    return Array.from(this.weeklyEvents).map(id => this.events.get(id));
  }
  
  getDailyEvents(date) {
    const dateKey = date.toISOString().split('T')[0];
    const eventIds = this.dailyEvents.get(dateKey) || new Set();
    return Array.from(eventIds).map(id => this.events.get(id));
  }
}
```

### 2. Optimized CSS for reMarkable Paper Pro Move

```css
/* Device-specific measurements */
:root {
  --device-width: 91mm;
  --device-height: 163mm;
  --usable-width: 85mm;
  --usable-height: 157mm;
  --base-font: 6pt;
  --small-font: 5pt;
  --tiny-font: 4pt;
}

/* Weekly Overview - Landscape */
@page weekly {
  size: 163mm 91mm;
  margin: 3mm;
}

.weekly-container {
  width: 157mm;
  height: 85mm;
  display: grid;
  grid-template-rows: 15mm 1fr 20mm;
  font-size: var(--small-font);
}

.weekly-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1pt solid #000;
  padding: 2mm;
}

.weekly-grid {
  display: grid;
  grid-template-columns: 20mm repeat(7, 1fr);
  grid-template-rows: 8mm repeat(8, 1fr); /* Reduced time slots */
  gap: 0.5pt;
  border: 1pt solid #000;
}

.time-cell {
  font-size: var(--tiny-font);
  padding: 0.5mm;
  border-right: 0.5pt solid #ccc;
  display: flex;
  align-items: center;
  justify-content: center;
}

.day-header {
  background: #f0f0f0;
  font-weight: bold;
  text-align: center;
  font-size: var(--small-font);
}

.event-cell {
  border-right: 0.5pt solid #ccc;
  border-bottom: 0.5pt solid #ccc;
  padding: 0.2mm;
  font-size: var(--tiny-font);
  position: relative;
}

/* Weekly sidebar */
.weekly-sidebar {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3mm;
  padding: 2mm;
  font-size: var(--small-font);
}

.priority-tasks, .weekly-goals {
  border: 1pt solid #000;
  padding: 2mm;
}

/* Daily Pages - Portrait */
@page daily {
  size: 91mm 163mm;
  margin: 2mm;
}

.daily-container {
  width: 87mm;
  height: 159mm;
  display: grid;
  grid-template-rows: 12mm 80mm 25mm 25mm 15mm;
  gap: 1mm;
  font-size: var(--base-font);
}

.daily-header {
  border-bottom: 1pt solid #000;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1mm;
  font-weight: bold;
}

/* Optimized time grid - CRITICAL FIX */
.time-grid {
  display: grid;
  grid-template-columns: 16mm 1fr;
  grid-template-rows: repeat(16, 1fr); /* 16 slots instead of 30 */
  border: 1pt solid #000;
  font-size: var(--small-font);
}

.time-label {
  border-right: 0.5pt solid #000;
  border-bottom: 0.5pt solid #ccc;
  padding: 0.5mm;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: var(--tiny-font);
}

.time-content {
  border-bottom: 0.5pt solid #ccc;
  padding: 0.5mm;
  min-height: 4.5mm;
  font-size: var(--tiny-font);
}

/* Priority section */
.priorities {
  border: 1pt solid #000;
  padding: 1mm;
  display: grid;
  grid-template-rows: 5mm repeat(3, 1fr);
}

.priority-header {
  font-weight: bold;
  border-bottom: 0.5pt solid #000;
  display: flex;
  align-items: center;
}

.priority-item {
  display: flex;
  align-items: center;
  gap: 2mm;
  font-size: var(--small-font);
}

/* Goals and Notes */
.daily-goals, .notes {
  border: 1pt solid #000;
  padding: 1mm;
  font-size: var(--small-font);
}

.status {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: var(--tiny-font);
  color: #666;
}
```

### 3. HTML Template with Bidirectional Linking

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>/* CSS from above */</style>
</head>
<body>
  <!-- Weekly Overview Page -->
  <div class="page weekly-page">
    <div class="weekly-container">
      <div class="weekly-header">
        <h1>WEEKLY PLANNER</h1>
        <span>WEEK OF SEP 8, 2025</span>
      </div>
      
      <div class="weekly-grid">
        <div class="time-cell"></div>
        <div class="day-header">MON</div>
        <div class="day-header">TUE</div>
        <div class="day-header">WED</div>
        <div class="day-header">THU</div>
        <div class="day-header">FRI</div>
        <div class="day-header">SAT</div>
        <div class="day-header">SUN</div>
        
        <!-- Time slots 9AM-5PM only for weekly view -->
        <div class="time-cell">09:00</div>
        <div class="event-cell" data-day="mon" data-time="09:00"></div>
        <div class="event-cell" data-day="tue" data-time="09:00"></div>
        <div class="event-cell" data-day="wed" data-time="09:00"></div>
        <div class="event-cell" data-day="thu" data-time="09:00"></div>
        <div class="event-cell" data-day="fri" data-time="09:00"></div>
        <div class="event-cell" data-day="sat" data-time="09:00"></div>
        <div class="event-cell" data-day="sun" data-time="09:00"></div>
        
        <!-- Repeat for 10:00, 11:00, 12:00, 13:00, 14:00, 15:00, 16:00 -->
      </div>
      
      <div class="weekly-sidebar">
        <div class="priority-tasks">
          <h3>PRIORITY TASKS</h3>
          <div class="task-list" id="weekly-tasks"></div>
        </div>
        <div class="weekly-goals">
          <h3>WEEKLY GOALS</h3>
          <div class="goal-list" id="weekly-goals"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Daily Page Template -->
  <div class="page daily-page" data-date="2025-09-08">
    <div class="daily-container">
      <div class="daily-header">
        <span>DAILY PLANNER - MONDAY</span>
        <span>SEP 8, 2025</span>
      </div>
      
      <div class="time-grid">
        <!-- Hour-based slots only -->
        <div class="time-label">07:00</div>
        <div class="time-content" data-time="07:00"></div>
        <div class="time-label">08:00</div>
        <div class="time-content" data-time="08:00"></div>
        <!-- Continue for 09:00 through 22:00 (16 total slots) -->
      </div>
      
      <div class="priorities">
        <div class="priority-header">PRIORITIES</div>
        <div class="priority-item">A) <span class="priority-content"></span></div>
        <div class="priority-item">B) <span class="priority-content"></span></div>
        <div class="priority-item">C) <span class="priority-content"></span></div>
      </div>
      
      <div class="daily-goals">
        <div class="goal-header">DAILY GOALS</div>
        <div class="goal-content"></div>
      </div>
      
      <div class="notes">
        <div class="notes-header">NOTES</div>
        <div class="notes-content"></div>
      </div>
      
      <div class="status">
        <span class="event-count">0 events scheduled</span>
        <span class="sync-status">0 total synced</span>
      </div>
    </div>
  </div>
</body>
</html>
```

### 4. JavaScript for Event Synchronization

```javascript
// Initialize event manager
const planner = new PlannerEventManager();

// Bidirectional event sync
function syncEventToWeekly(event, dayElement) {
  const weeklyCell = document.querySelector(
    `[data-day="${event.day}"][data-time="${event.startTime}"]`
  );
  if (weeklyCell && event.showInWeekly) {
    weeklyCell.textContent = event.title.substring(0, 10) + '...';
    weeklyCell.style.backgroundColor = event.priority === 'high' ? '#ffcccc' : '#f0f0f0';
  }
}

function syncEventToDaily(event, weeklyElement) {
  const dailyPage = document.querySelector(`[data-date="${event.date}"]`);
  const timeSlot = dailyPage?.querySelector(`[data-time="${event.startTime}"]`);
  if (timeSlot) {
    timeSlot.textContent = event.title;
    timeSlot.style.backgroundColor = event.priority === 'high' ? '#ffcccc' : 'transparent';
  }
}

// Event creation handler
function createEvent(title, date, startTime, priority = 'normal') {
  const event = {
    title,
    date: new Date(date),
    startTime,
    priority,
    showInWeekly: priority === 'high' || title.length < 20
  };
  
  const eventId = planner.addEvent(event);
  
  // Update both views
  syncEventToWeekly(event);
  syncEventToDaily(event);
  
  return eventId;
}
```

### 5. PDF Generation Configuration

```javascript
// Puppeteer configuration for reMarkable Paper Pro Move
const generatePDF = async () => {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  
  await page.setContent(htmlContent);
  
  const pdf = await page.pdf({
    format: 'custom',
    width: '91mm',
    height: '163mm',
    printBackground: true,
    preferCSSPageSize: true,
    displayHeaderFooter: false,
    margin: { top: '0', right: '0', bottom: '0', left: '0' },
    
    // reMarkable specific optimizations
    omitBackground: false,
    scale: 1.0,
    
    // Ensure crisp rendering for e-ink
    quality: 100,
    
    // Page break handling
    pageRanges: '1-8'
  });
  
  await browser.close();
  return pdf;
};
```

### 6. Critical Implementation Notes:

**Must Fix:** Reduce time slots from 30 to 16 (hourly instead of 30-minute intervals)
**Must Add:** Event objects that automatically sync between weekly and daily views  
**Must Optimize:** Font sizes using CSS custom properties for consistent scaling
**Must Test:** PDF rendering at exact 91mm × 163mm dimensions

This code will ensure your planner fits properly on the reMarkable Paper Pro Move with functional bidirectional linking between views.​​​​​​​​​​​​​​​​